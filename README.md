# RTOS_1
 Studieren STM
 
 4янв2022
  * @Biriuk
  * peotr60@mail.ru
  *
  * RTOS_1
  * Изучение операционной среды FreeRTOS в среде STM32CubeIDE с помощью библиотеки HAL
  * с использованием отладочной платы NUCLEO-L452RE-P
  
 В ходе разработки использовалось:
 1. Лекция-практикум "SM32CubeIDE + FreeRTOS. Примеры задач, очереди, семафоров"
 https://www.youtube.com/watch?v=JKkyF53AAM4
 2. FreeRTOS
 https://www.youtube.com/playlist?list=PLtixVcWwvWZvI-noRyxWlNNehlf9FhB78
 3. STM32 + FreeRTOS Часть 1. Создаем задачи через CubeMX.
 https://www.youtube.com/watch?v=wx3-oESwx_M
 4. STM32 + FreeRTOS Часть 2. Как работают задачи? Нагрузка на процессор. Обмен данными между задачами
 https://www.youtube.com/watch?v=LQnsJch2O70&list=RDCMUC2vcuP7iWaX0MVG6hJ-cOkg
 5. STM32 + FreeRTOS Часть 3. Функции управления задачами. Оценка стека. Загрузка процессора
 https://www.youtube.com/watch?v=wTK11IDpg7s
 6. STM32 + FreeRTOS Часть 4. Функции управления очередями
 https://www.youtube.com/watch?v=pT5alekoeZk
 7. FreeRTOS Программные таймеры
 https://www.youtube.com/watch?v=0zpugp5ZmpU
 8. STM32 + FreeRTOS или Почему использование операционной системы оправдано даже в небольших проектах
 https://www.youtube.com/watch?v=HELZmxW5pwU
 9. FreeRTOS Приоритизация и алгоритмы управления диспетчером задач. Вытесняющий и кооперативный режимы
 https://www.youtube.com/watch?v=VuyL0sCVPk8
 10. Электронная нагрузка на STM32. Программирование. Задачи FreeRTOS
 https://www.youtube.com/watch?v=mvyT8YYr4n8
 11. Программирование МК STM32. Урок 104. FreeRTOS. Бинарные (двоичные) семафоры. Часть 1
 https://www.youtube.com/watch?v=kopgjKUFCVY
 https://narodstream.ru/stm-urok-104-freertos-binarnye-semafory-chast-1/
 12. Программирование МК STM32. Урок 111. FreeRTOS. Очереди. Часть 1
 https://www.youtube.com/watch?v=krpf4xyGR28
 https://narodstream.ru/stm-urok-111-freertos-ocheredi-chast-1/
 13. Программирование МК STM32. Урок 114. FreeRTOS. Продвинутая задержка DelayUntil
 https://www.youtube.com/watch?v=PoGskwqXAKs
 https://narodstream.ru/stm-urok-114-freertos-prodvinutaya-zaderzhka-delayuntil/
 14. STM Урок 106. FreeRTOS. Динамическое создание и уничтожение задач. Часть 1
 https://narodstream.ru/stm-urok-106-freertos-dinamicheskoe-sozdanie-i-unichtozhenie-zadach-chast-1/
 15. STM Урок 108. FreeRTOS. Параметры
 https://narodstream.ru/stm-urok-108-freertos-parametry/
 16. STM Урок 110. FreeRTOS. Приоритеты задач
 https://narodstream.ru/stm-urok-110-freertos-prioritety-zadach/
 17. STM Урок 112. FreeRTOS. Таймеры
 https://narodstream.ru/stm-urok-112-freertos-tajmery/
 18. STM Урок 116. FreeRTOS. Прерывания. Очереди в прерываниях. Часть 1
 https://narodstream.ru/stm-urok-116-freertos-preryvaniya-ocheredi-v-preryvaniyax-chast-1/
 19. STM Урок 143. USB HS Host MSC FREERTOS. Часть 1
 https://narodstream.ru/stm-urok-143-usb-hs-host-msc-freertos-chast-1/
 20. FreeRTOS: введение
 https://habr.com/ru/post/129105/
 21. STM32F1xx — Инструменты разработчика и FreeRTOS
 https://habr.com/ru/post/139601/
 22. FreeRTOS: мьютексы и критические секции
 https://habr.com/ru/post/129445/
 23. FreeRTOS: межпроцессное взаимодействие
 https://habr.com/ru/post/129180/
 24. STM32, C++ и FreeRTOS. Разработка с нуля. Часть 1
 https://habr.com/ru/post/261807/
 25. STM32 и FreeRTOS. 4. Шаг в сторону HAL
 https://habr.com/ru/post/249395/
 26. STM32 и FreeRTOS. 1. Развлечение с потоками
 https://habr.com/ru/post/249273/
 27. FreeRTOS для чайников. Краткое описание
 http://easyelectronics.ru/freertos_manual.html
 28. STM32 + FreeRTOS
 http://we.easyelectronics.ru/STM32/stm32-freertos.html
 29. Установка и конфигурация FreeRTOS
 http://easyelectronics.ru/ustanovka-i-konfiguraciya-freertos.html
 30. FreeRTOS. Пример
 http://easyelectronics.ru/freertos-primer.html
 31. Отладка FreeRTOS в Eclipse, TrueStudio и CubeIDE
 https://istarik.ru/blog/stm32/154.html
 32. START: Создание проекта с STM32 Cube MX и FreeRTOS для Atollic TrueSTUDIO
 http://www.milbestore.ru/article/sozdanie-proekta-s-stm32-cube-mx-i-freertos-dlya-atollic-truestudio
 33. Цикл статей "FreeRTOS: практическое применение"
 https://embedded-books.livejournal.com/67883.html
 34. Вопросы и ответы по FreeRTOS
 https://aws.amazon.com/ru/freertos/faqs/
 34. STM32 и FreeRTOS. 1. Развлекаемся с потоками
 https://club.cnews.ru/blogs/entry/stm32_i_freertos_1_razvlekaemsya_s_potokami
 35. Developing Applications on STM32Cube with RTOS
 http://pro-interes.com/wp-content/uploads/2020/02/Developing-Applications-on-STM32Cube-with-RTOS-Rus.pdf
 36. FreeRtos tips & API Reference 8.1.2.chm
 https://www.sites.google.com/site/andreysobolnn/software/freertos
 37. STM32 и FreeRTOS. 2. Семафорим по-черному
 https://habr.com/ru/post/249283/
 38. STM32 и FreeRTOS. 3. Встаем в очередь
 https://habr.com/ru/post/249381/
 39. FreeRTOS — операционная система для микроконтроллеров
 40. Реализация функции задержки меньше 1мс на FreeRTOS с помощью таймера и Task Notification
 http://easyelectronics.ru/tag/rtos
 41.Занимательная электроника FreeRTOS
 https://texnohelp.com/freertos/
 42. Урок №3. Использование системы FreeRTOS на примере работы кнопки и светодиода с помощью микроконтроллера STM32F103:
 https://texnohelp.com/stm32-freertos-lesson3/
 
4янв22 
ВНИМАНИЕ! 
Столкнулся с проблемой при миграции stm32cube_fw_l4_v1170 на stm32cube_fw_l4_v1171 в проекте с RTOS. После обновления проекта в RTOS.ioc и компилировании main.c выдавалось 9 ошибок следующего характера: 
multiple definition of `SystemCoreClockUpdate'; ./Core/Src/system_stm32l4xx.o: 
и далее путь D:/STM32/STM32_File/RTOS_1/Debug/../Core/Src/system_stm32l4xx.c:272: first defined here 
С трудом нашёл вот это: 
https://stackoverflow.com/questions/64090730/multiple-definition-of-first-defined-here-stm32-ac6-studio 
Вот перевод: 
Это ошибки компоновщика. Вы, вероятно, делаете что - то подобное: 
главная.c: 
#include "lib.h"  
init.c: 
#include "lib.h"  
Когда компоновщик проверяет символы и типы в main.c и init.c, он обнаруживает, что в каждом из них были определены одни и те же символы, следовательно, ошибка. Обычно заголовочные файлы только объявляют символы, а не определяют их, но есть некоторые творческие способы использования условного кода, которые могут обойти это 
Т.е. производится повторное определение или включение одного и того же. В моём случае оказалось, что файл system_stm32l4xx.c находится в двух папках: 
D:\STM32\STM32_File\RTOS_1\Core\Src\system_stm32l4xx.c 
D:\STM32\STM32_File\RTOS_1\Drivers\CMSIS\Device\ST\STM32L4xx\Source\Templates\Core\Src\system_stm32l4xx.c 
После удаления файла из Templates ошибки исчезли! Однако, после последующего обновления проекта в RTOS.ioc указанный файл в папке Templates восстановился, и вновь выдались ошибки! 
Удаления из папки Core\Src\ приводили к аналогичным результатам. 
Т.е. нужно после каждого обновления проекта в окне, вызываемом файлом *.ioc (в моём случае это RTOS.ioc) нужно удалять повторяющиеся файлы, в моём случае файл system_stm32l4xx.c. Лучше удалять из папки Templates И СЛЕДИТЬ ЗА ОПЕРАТОРАМИ В main.c, могут пропадать после такого обновления. У меня пропадали файлы: 
#include "string.h" // это для функции strlen() 
#include <stdio.h> 
N.B! Чтобы инклюды не пропадали, всего-навсего нужно было их вводить в графу "Private includes"!
