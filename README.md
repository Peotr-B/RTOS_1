# RTOS_1
 Studieren STM

4янв22 
ВНИМАНИЕ! 
Столкнулся с проблемой при миграции stm32cube_fw_l4_v1170 на stm32cube_fw_l4_v1171 в проекте с RTOS. После обновления проекта в RTOS.ioc и компилировании main.c выдавалось 9 ошибок следующего характера: 
multiple definition of `SystemCoreClockUpdate'; ./Core/Src/system_stm32l4xx.o: 
и далее путь D:/STM32/STM32_File/RTOS_1/Debug/../Core/Src/system_stm32l4xx.c:272: first defined here 
С трудом нашёл вот это: 
https://stackoverflow.com/questions/64090730/multiple-definition-of-first-defined-here-stm32-ac6-studio 
Вот перевод: 
Это ошибки компоновщика. Вы, вероятно, делаете что - то подобное: 
главная.c: 
#include "lib.h"  
init.c: 
#include "lib.h"  
Когда компоновщик проверяет символы и типы в main.c и init.c, он обнаруживает, что в каждом из них были определены одни и те же символы, следовательно, ошибка. Обычно заголовочные файлы только объявляют символы, а не определяют их, но есть некоторые творческие способы использования условного кода, которые могут обойти это 
Т.е. производится повторное определение или включение одного и того же. В моём случае оказалось, что файл system_stm32l4xx.c находится в двух папках: 
D:\STM32\STM32_File\RTOS_1\Core\Src\system_stm32l4xx.c 
D:\STM32\STM32_File\RTOS_1\Drivers\CMSIS\Device\ST\STM32L4xx\Source\Templates\Core\Src\system_stm32l4xx.c 
После удаления файла из Templates ошибки исчезли! Однако, после последующего обновления проекта в RTOS.ioc указанный файл в папке Templates восстановился, и вновь выдались ошибки! 
Удаления из папки Core\Src\ приводили к аналогичным результатам. 
Т.е. нужно после каждого обновления проекта в окне, вызываемом файлом *.ioc (в моём случае это RTOS.ioc) нужно удалять повторяющиеся файлы, в моём случае файл system_stm32l4xx.c. Лучше удалять из папки Templates И СЛЕДИТЬ ЗА ОПЕРАТОРАМИ В main.c, могут пропадать после такого обновления. У меня пропадали файлы: 
#include "string.h" // это для функции strlen() 
#include <stdio.h> 
